{"version":3,"sources":["main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/* global $ Vue */\r\n'use strict';\r\n\r\n// App data\r\nconst data = {\r\n\tchannelNames: [\r\n\t\t'freecodecamp',\r\n\t\t'ESL_LOL',\r\n\t\t'ESL_SC2',\r\n\t\t'SmoothMcGroove',\r\n\t\t'brunofin',\r\n\t\t'ESL_CSGO',\r\n\t\t'ObamaCareTeam',\r\n\t],\r\n\tstatuses: Object.freeze({\r\n\t\t0: 'online',\r\n\t\t1: 'offline',\r\n\t\t2: 'nonexistent'\r\n\t}),\r\n\tchannelInfos: {\r\n\t\tonline: [\r\n\t\t\t{\r\n\t\t\t\tdisplay_name: 'Test',\r\n\t\t\t\tlogo: 'https://static-cdn.jtvnw.net/jtv_user_pictures/esl_csgo-profile_image-546a0c1883798a41-300x300.jpeg',\r\n\t\t\t\tstatus: 'Test test',\r\n\t\t\t},\r\n\t\t],\r\n\t\toffline: [],\r\n\t\tnonexistent: [],\r\n\t}\r\n};\r\n\r\n\r\n// DOM elements (batched queries for perfomance)\r\nconst DOMElements = {\r\n\tchannels: {\r\n\t\tonline: document.querySelector('.channels__online'),\r\n\t\toffline: document.querySelector('.channels__offline'),\r\n\t\tnonexistent: document.querySelector('.channels__nonexistent'),\r\n\t},\r\n};\r\n\r\n\r\nconst url = function url(type, name) {\r\n\treturn `https://api.twitch.tv/kraken/${type}s/${name}?api_version=3`;\r\n};\r\n\r\n// API call\r\nconst getSingleInfo = function getSingleInfo(callback, url) {\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tcomplete: callback,\r\n\t});\r\n};\r\n\r\nconst getInfos = function getInfos(callback, list) {\r\n\t// curry getSingleInfo function with call type and callback\r\n\tconst get = getSingleInfo.bind(null, callback);\r\n\tconst type = 'stream';\r\n\r\n\tlist.forEach(s => get(url(type, s)));\r\n};\r\n\r\n// I know.\r\n// FIXME: This function needs refactoring. Serious one.\r\nconst saveChannelInfo = function saveChannelInfo(request, status) {\r\n\tconst response = request.responseJSON;\r\n\r\n\tif (request) {\r\n\t\tif (status === 'error') {\r\n\t\t\tif (response.status === 422) {\r\n\t\t\t\t// user doesn't exist\r\n\t\t\t\tconst name = response.message.split('\\'')[1];\r\n\t\t\t\tdata.channelInfos.nonexistent.push({name: name, logo: null});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error('API call error:', status, request);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (response.stream) {\r\n\t\t\t\t// channel online\r\n\t\t\t\tdata.channelInfos.online.push(response.stream.channel);\r\n\t\t\t}\r\n\t\t\telse if (response._id) {\r\n\t\t\t\t// channel offline\r\n\t\t\t\tdata.channelInfos.offline.push(response);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// make additional request for offline channel's info\r\n\t\t\t\tgetSingleInfo(saveChannelInfo, response._links.channel);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// Initializing function\r\nconst init = function init(channelList) {\r\n\tgetInfos(saveChannelInfo, data.channelNames);\r\n};\r\n\r\n\r\nnew Vue({\r\n\tel: '#app',\r\n\r\n\tdata: {\r\n\t\tchannels: data.channelInfos,\r\n\t\teditMode: false,\r\n\t\tstreamName: '',\r\n\t},\r\n\r\n\tmethods: {\r\n\t\ttoggleEditMode() {\r\n\t\t\tthis.editMode = !this.editMode;\r\n\t\t\treturn this.editMode;\r\n\t\t},\r\n\t\tremoveChannel(index, status) {\r\n\t\t\tconst statusStr = data.statuses[status];\r\n\r\n\t\t\tthis.channels[statusStr].$remove(this.channels[statusStr][index]);\r\n\t\t},\r\n\t\taddStream() {\r\n\t\t\tgetSingleInfo(saveChannelInfo, url('stream', this.streamName));\r\n\t\t},\r\n\t},\r\n\r\n\tready: init,\r\n});\r\n"]}